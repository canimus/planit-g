<html>
<head>
	<title>Planit Perth - Skill Matrix</title>
	<script type="text/javascript" src="js/d3.v3.min.js"></script>
	<style>
		h1 {font-family: "Proxima Nova"; font-size: 26px; font-weight: bold;}
		text {font-family: "Proxima Nova"; font-size: 14px; font-weight: normal;}
		line {stroke: #aaa; stroke-width: 0.8px;}
	</style>
</head>
<body>
	<h1>Perth Skills Matrix - 2015</h1>	
	<div id="chart"></div>
	<script>
		var width = 1200;
		var height = 600;

		var data = null;
		var certs = null;
		var tools = null;
		var tech = null;
		var ind = null;

		var svg = null;
		var colors = d3.scale.category20();

		d3.json("/skills.json", function(e,d) {
			data = d;			

			svg = d3.select("#chart").append("svg");
			svg.attr("width", width).attr("height", height);			

			names = data.map(function(d) {return d.name});
			names.sort().forEach(function(d,i) {
				
				svg.append("circle").attr("cx", 5).attr("cy", function(o) { return (i+1)*25; }).attr("r", 5).style("fill", function(o,p) {return colors(i); });
				svg.append("text").attr("x", 10).attr("y", function(o) { return (i+1)*25; }).text(function(k) {return d}).attr("class", "name");
				svg.append("text").attr("x", 10).attr("y", function(o) { return (i+1)*25; }).text(function(k) {return data[i].role}).attr("class", "role");
				svg.append("line").attr("x1", 0).attr("y1", function(o) { return (i+1)*25; }).attr("x2", 1100).attr("y2", function(o) { return (i+1)*25; })
			});
			d3.selectAll("text.name").attr("transform", "translate(20,100)");
			d3.selectAll("text.role").attr("transform", "translate(200,100)");
			d3.selectAll("circle").attr("transform", "translate(10,95)");
			d3.selectAll("line").attr("transform", "translate(2,106)");
			
		});

d3.json("/certs.json", function(e,d) {
	certs = d.map(function(p) {return p.name});
	certs.forEach(function(p,i) {
		console.log(p);
		svg.append("text")
			.attr("x", function(o) { return (i*50); })
			.attr("y", 10).text(function(k) {return p})
			.attr("class", "cert")
		   	.attr("text-anchor", "end");
	});	

});

	</script>
</body>
</html>